# Seqplot v6.0.0 - Changelog

## Build 20251120 (November 20, 2025)

### Critical Fixes - Locale/Internationalization
- Fixed locale-dependent decimal separator bug in VSP chart URLs
  - URLs now always use periods (14.0) instead of commas (14,0) for decimal numbers
  - Affects users in Germany, France, Italy, and other comma-decimal locales
- Fixed all String.format() calls constructing URLs to use Locale.US
  - EnterStar.java: VSP chart requests (2 locations)
  - DataConnector.java: VSX API URL construction  
  - DSS2Manager.java: HiPS2FITS, SDSS SIAP, JPG download URLs (3 locations)
  - TestSDSSDownload.java: Test utility URL
- Fixed DecimalFormat instances to use US locale symbols
  - StarPlotPanel.java: df and arcMinuteFormat
  - PhotCompWindow.java: df2
  - Seqplot.java: threeDecimalFormat

### User Experience Improvements
- Added limiting magnitude validation warning
  - Warns when limiting mag is brighter than star's MinMag from VSX
  - Displays recommended magnitude (MinMag + 2.0)
  - Prevents "no data found" errors proactively
  - User can choose to continue anyway
  
- Changed VSP chart magnitude limit behavior
  - Now uses value from "Limiting mag" field in Request Star dialog
  - Defaults to 14.0 if field is empty
  - Previously used automatic calculation based on VSX MinMag
  - Gives users direct control over VSP queries

### Bug Fixes
- Fixed NullPointerException when user clicks Cancel in file save dialog
  - Added null checks after all JOptionPane.showInputDialog() calls
  - Affects "Save Logfile" and "Save Table" operations
  - DataConnector.java: setUpLogfile() method
  
- Fixed NullPointerException in "Next Star" button click
  - Added null check before accessing mainTitle.setText()
  - Only occurs when using StarPlotPanel mode (default)
  - mainTitle only initialized in JFreeChart mode
  - Seqplot.java: actionPerformed() method

### Technical Details
- Added java.util.Locale import to 5 files
- All floating-point URL parameters now explicitly formatted with Locale.US
- DecimalFormat instances use DecimalFormatSymbols(Locale.US)
- Applied fixes to both src/ and seqplot-v6.0.0-20251114/src/ folders

### Files Modified
- src/AAVSOtools/EnterStar.java
- src/AAVSOtools/DataConnector.java  
- src/AAVSOtools/DSS2Manager.java
- src/AAVSOtools/StarPlotPanel.java
- src/AAVSOtools/PhotCompWindow.java
- src/AAVSOtools/Seqplot.java
- src/AAVSOtools/TestSDSSDownload.java

## Build 20251114 (November 14, 2025)
- Previous stable release
- VSP API integration
- Enhanced star plot panel
- Multiple catalog support
